<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_upocargo_mudanza_tree" model="ir.ui.view">
        <field name="name">upocargo.mudanza.tree</field>
        <field name="model">upocargo.mudanza</field>
        <field name="arch" type="xml">
            <tree string="Mudanzas UPOCARGO">
                <field name="id_mudanza" />
                <field name="fecha" />
                <field name="dirOrigen" />
                <field name="dirDestino" />
                <field name="estado" />
                <field name="cliente" />
                <field name="factura" />
            </tree>
        </field>
    </record>

    <record id="view_upocargo_mudanza_form" model="ir.ui.view">
        <field name="name">upocargo.mudanza.form</field>
        <field name="model">upocargo.mudanza</field>
        <field name="arch" type="xml">
            <form string="Mudanza">
                <header invisible="estado == 'cancelado'">
                    <button name="action_cancelar_mudanza" type="object"
                        string="Cancelar Mudanza"
                        class="btn-danger" />
                </header>
                <sheet>
                    <group>
                        <field name="id_mudanza" />
                        <field name="fecha" />
                        <field name="fecha_final_mudanza" invisible="not almacenamientos" />
                        <field name="dirOrigen" />
                        <field name="dirDestino" />
                        <field name="estado" />
                    </group>
                    <field name="vehiculos_ocupados" invisible="1" />
                    <field name="empleados_ocupados" invisible="1" />
                    <group>
                        <field name="cliente" />
                    </group>
                    <group string="Almacenamientos">
                        <field name="almacenamientos" widget="one2many_list"
                            domain="[('mudanza_id', '=', active_id)]">
                            <tree>
                                <field name="fecha_ingreso" />
                                <field name="fecha_salida" />
                                <field name="almacen" />
                            </tree>
                        </field>
                    </group>
                    <notebook>
                        <page name="Vehiculos">
                            <field name="vehiculos">
                                <tree>
                                    <field name="id_vehiculo" />
                                    <field name="matricula" />
                                </tree>
                            </field>
                        </page>
                        <page name="Empleados">
                            <field name="empleados">
                                <tree>
                                    <field name="id_empleado" />
                                    <field name="nombre" />
                                </tree>
                            </field>
                        </page>
                        <page name="Factura">
                            <field name="factura">
                                <tree>
                                    <field name="id_factura" />
                                    <field name="precio" widget="monetary"
                                        options="{'currency_field': 'currency_id'}" />
                                    <field name="currency_id" invisible="1" />
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_upocargo_mudanza_calendar" model="ir.ui.view">
        <field name="name">upocargo.mudanza.calendar</field>
        <field name="model">upocargo.mudanza</field>
        <field name="arch" type="xml">
            <calendar string="Mudanzas" color="estado" date_start="fecha" date_stop="fecha"
                mode="month">
                <field name="id_mudanza" />
                <field name="cliente" />
            </calendar>
        </field>
    </record>

    <record id="view_upocargo_mudanza_search" model="ir.ui.view">
        <field name="name">upocargo.mudanza.search</field>
        <field name="model">upocargo.mudanza</field>
        <field name="arch" type="xml">
            <search>
                <filter name="search_precio" string="Precio > 5000"
                    domain="[('factura.precio','>',5000)]" />
                <separator orientation="vertical" />
                <group expand="0" string="Agrupar por...">
                    <!--<filter
                    name="group_by_cliente" string="Cliente"
                    context="{'group_by':'cliente.id_cliente'}" />-->
                </group>
            </search>
        </field>
    </record>

    <record id="upocargo_mudanzas_action" model="ir.actions.act_window">
        <field name="name">Mudanzas UPOCARGO</field>
        <field name="res_model">upocargo.mudanza</field>
        <field name="view_mode">calendar,tree,form</field>
    </record>
</odoo>